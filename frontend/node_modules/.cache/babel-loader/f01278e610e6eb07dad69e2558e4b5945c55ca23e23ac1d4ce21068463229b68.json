{"ast":null,"code":"import * as d3 from \"d3\";\nimport { interpolateSpectral } from \"d3-scale-chromatic\";\nexport function donutchart(width, data) {\n  const height = Math.min(width, 500);\n  const radius = Math.min(width, height) / 2;\n  const arc = d3.arc().innerRadius(radius * 0.67).outerRadius(radius - 1);\n  const pie = d3.pie().padAngle(1 / radius).sort(null).value(d => d.value);\n  const color = d3.scaleOrdinal().domain(data.map(d => d.name)).range(d3.quantize(t => interpolateSpectral(t * 0.8 + 0.1), data.length).reverse());\n  let svg = d3.select(\"#donut_chart\");\n  if (svg.empty()) {\n    svg = d3.select(\"body\").append(\"svg\").attr(\"id\", \"donut_chart\").attr(\"width\", width).attr(\"height\", height).attr(\"viewBox\", [-width / 2, -height / 2, width, height]).attr(\"style\", \"max-width: 100%; height: auto;\");\n  } else {\n    svg.selectAll(\"*\").remove();\n  }\n  svg.append(\"g\").selectAll().data(pie(data)).join(\"path\").attr(\"fill\", d => color(d.data.name)).attr(\"d\", arc).append(\"title\").text(d => `${d.data.name}: ${d.data.value.toLocaleString()}`);\n  svg.append(\"g\").attr(\"font-family\", \"sans-serif\").attr(\"font-size\", 12).attr(\"text-anchor\", \"middle\").selectAll().data(pie(data)).join(\"text\").attr(\"transform\", d => `translate(${arc.centroid(d)})`).call(text => text.append(\"tspan\").attr(\"y\", \"-0.4em\").attr(\"font-weight\", \"bold\").text(d => d.data.name)).call(text => text.filter(d => d.endAngle - d.startAngle > 0.25).append(\"tspan\").attr(\"x\", 0).attr(\"y\", \"0.7em\").attr(\"fill-opacity\", 0.7).text(d => d.data.value.toLocaleString(\"en-US\")));\n}","map":{"version":3,"names":["d3","interpolateSpectral","donutchart","width","data","height","Math","min","radius","arc","innerRadius","outerRadius","pie","padAngle","sort","value","d","color","scaleOrdinal","domain","map","name","range","quantize","t","length","reverse","svg","select","empty","append","attr","selectAll","remove","join","text","toLocaleString","centroid","call","filter","endAngle","startAngle"],"sources":["/Users/nithinkatla00/My-projects/Viz-project/frontend/src/utils/svg-donutchart.js"],"sourcesContent":["import * as d3 from \"d3\";\nimport { interpolateSpectral } from \"d3-scale-chromatic\";\n\nexport function donutchart(width, data) {\n  const height = Math.min(width, 500);\n  const radius = Math.min(width, height) / 2;\n\n  const arc = d3\n    .arc()\n    .innerRadius(radius * 0.67)\n    .outerRadius(radius - 1);\n\n  const pie = d3\n    .pie()\n    .padAngle(1 / radius)\n    .sort(null)\n    .value((d) => d.value);\n\n  const color = d3\n    .scaleOrdinal()\n    .domain(data.map((d) => d.name))\n    .range(\n      d3\n        .quantize((t) => interpolateSpectral(t * 0.8 + 0.1), data.length)\n        .reverse()\n    );\n\n  let svg = d3.select(\"#donut_chart\");\n  if (svg.empty()) {\n    svg = d3\n      .select(\"body\")\n      .append(\"svg\")\n      .attr(\"id\", \"donut_chart\")\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .attr(\"viewBox\", [-width / 2, -height / 2, width, height])\n      .attr(\"style\", \"max-width: 100%; height: auto;\");\n  } else {\n    svg.selectAll(\"*\").remove();\n  }\n\n  svg\n    .append(\"g\")\n    .selectAll()\n    .data(pie(data))\n    .join(\"path\")\n    .attr(\"fill\", (d) => color(d.data.name))\n    .attr(\"d\", arc)\n    .append(\"title\")\n    .text((d) => `${d.data.name}: ${d.data.value.toLocaleString()}`);\n\n  svg\n    .append(\"g\")\n    .attr(\"font-family\", \"sans-serif\")\n    .attr(\"font-size\", 12)\n    .attr(\"text-anchor\", \"middle\")\n    .selectAll()\n    .data(pie(data))\n    .join(\"text\")\n    .attr(\"transform\", (d) => `translate(${arc.centroid(d)})`)\n    .call((text) =>\n      text\n        .append(\"tspan\")\n        .attr(\"y\", \"-0.4em\")\n        .attr(\"font-weight\", \"bold\")\n        .text((d) => d.data.name)\n    )\n    .call((text) =>\n      text\n        .filter((d) => d.endAngle - d.startAngle > 0.25)\n        .append(\"tspan\")\n        .attr(\"x\", 0)\n        .attr(\"y\", \"0.7em\")\n        .attr(\"fill-opacity\", 0.7)\n        .text((d) => d.data.value.toLocaleString(\"en-US\"))\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}